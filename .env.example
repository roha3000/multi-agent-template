# Multi-Agent Template Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# API KEYS
# =============================================================================

# Anthropic API Key (required for Claude models)
ANTHROPIC_API_KEY=your_anthropic_key_here

# OpenAI API Key (optional, for GPT models)
OPENAI_API_KEY=your_openai_key_here

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================

# Primary Models - All using Claude Opus 4.5 for best performance
RESEARCH_MODEL=claude-opus-4-5-20251101
PLANNING_MODEL=claude-opus-4-5-20251101
DESIGN_ARCHITECTURE_MODEL=claude-opus-4-5-20251101
DESIGN_IMPLEMENTATION_MODEL=claude-opus-4-5-20251101
TESTING_MODEL=claude-opus-4-5-20251101
IMPLEMENTATION_MODEL=claude-opus-4-5-20251101
VALIDATION_MODEL=claude-opus-4-5-20251101
ITERATION_STRATEGY_MODEL=claude-opus-4-5-20251101
ITERATION_EXECUTION_MODEL=claude-opus-4-5-20251101

# Secondary/Validation Models
RESEARCH_SECONDARY_MODEL=claude-opus-4-5-20251101
PLANNING_VALIDATION_MODEL=claude-opus-4-5-20251101
TESTING_EDGE_CASE_MODEL=claude-opus-4-5-20251101

# =============================================================================
# TOKEN LIMITS
# =============================================================================

# Maximum tokens per phase (output tokens)
MAX_TOKENS_RESEARCH=8000
MAX_TOKENS_PLANNING=6000
MAX_TOKENS_DESIGN=4000
MAX_TOKENS_IMPLEMENTATION=3000
MAX_TOKENS_TESTING=2000

# =============================================================================
# COST MANAGEMENT
# =============================================================================

# Enable cost tracking in dashboard
ENABLE_COST_TRACKING=true

# Daily token limit before warnings
DAILY_TOKEN_LIMIT=50000

# Alert threshold (percentage of daily limit)
ALERT_THRESHOLD=0.8

# =============================================================================
# SWARM FEATURE FLAGS
# =============================================================================
# Enable/disable swarm components via environment variables.
# All features default to TRUE for backward compatibility.
# Set to 'false', '0', 'no', 'off', or 'disabled' to disable.

# Competitive Planning: Generate multiple implementation plans for complex tasks
# When enabled, tasks with complexity >= 40 get 2-3 competing plans
ENABLE_COMPETITIVE_PLANNING=true

# Complexity Detection: Analyze task complexity using weighted scoring
# Dimensions: dependency depth, acceptance criteria, effort, keywords, history
ENABLE_COMPLEXITY_DETECTION=true

# Confidence Monitoring: Track execution confidence via weighted signals
# Signals: qualityScore, velocity, iterations, errorRate, historical
ENABLE_CONFIDENCE_MONITORING=true

# Security Validation: Protect against prompt injection, path traversal, etc.
# Modes: 'enforce' (block threats) or 'audit' (log only)
ENABLE_SECURITY_VALIDATION=true

# =============================================================================
# SWARM COMPONENT CONFIGURATION
# =============================================================================

# Complexity Analyzer
# Threshold for competitive planning (0-100, default: 40)
COMPLEXITY_THRESHOLD=40

# Cache timeout for complexity analysis in milliseconds (default: 60000)
COMPLEXITY_CACHE_TIMEOUT=60000

# Confidence Monitor
# Warning threshold (0-100, default: 60)
CONFIDENCE_WARNING_THRESHOLD=60

# Critical threshold (0-100, default: 40)
CONFIDENCE_CRITICAL_THRESHOLD=40

# Emergency threshold (0-100, default: 25)
CONFIDENCE_EMERGENCY_THRESHOLD=25

# Maximum iterations before confidence drops to 0 (default: 5)
CONFIDENCE_MAX_ITERATIONS=5

# Security Validator
# Operating mode: 'enforce' (block threats) or 'audit' (log only)
SECURITY_MODE=enforce

# Maximum description length (default: 5000)
SECURITY_MAX_DESCRIPTION_LENGTH=5000

# Log threats to console (default: true)
SECURITY_LOG_THREATS=true

# Plan Evaluator
# Tie threshold - margin below which human review is flagged (default: 10)
PLAN_TIE_THRESHOLD=10

# Minimum steps for a valid plan (default: 3)
PLAN_MIN_STEPS=3

# Maximum steps before efficiency penalty (default: 15)
PLAN_MAX_STEPS=15

# =============================================================================
# NOTIFICATION CONFIGURATION (Optional)
# =============================================================================

# Twilio (SMS notifications)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# SendGrid (Email notifications)
SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=notifications@yourdomain.com

# =============================================================================
# DASHBOARD & MONITORING
# =============================================================================

# Dashboard server port (default: 3033)
DASHBOARD_PORT=3033

# Enable SSE real-time updates
ENABLE_SSE_UPDATES=true

# Session inactive timeout in minutes (default: 5)
SESSION_INACTIVE_TIMEOUT=5

# =============================================================================
# OPENTELEMETRY CONFIGURATION (Optional)
# =============================================================================

# Enable Claude Code telemetry
CLAUDE_CODE_ENABLE_TELEMETRY=1

# OTLP endpoint for metrics
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Service name for telemetry
OTEL_SERVICE_NAME=multi-agent-template

# Metrics export interval in milliseconds
OTEL_METRIC_EXPORT_INTERVAL=30000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# SQLite database path (default: .claude/data/usage.db)
DATABASE_PATH=.claude/data/usage.db

# Enable database migrations on startup
RUN_MIGRATIONS=true
