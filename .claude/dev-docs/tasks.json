{
  "_concurrency": {
    "version": 118,
    "lastModifiedBy": 478,
    "lastModifiedAt": "2026-01-05T05:28:51.022Z"
  },
  "version": "1.1.0",
  "project": {
    "name": "multi-agent-template",
    "phases": [
      "research",
      "planning",
      "design",
      "implementation",
      "testing",
      "validation"
    ]
  },
  "backlog": {
    "now": {
      "description": "Current sprint tasks",
      "tasks": [
        "dashboard-blocked-tasks-view"
      ]
    },
    "next": {
      "description": "Next priority after now is complete",
      "tasks": [
        "dashboard-tasks-tab-claims",
        "dashboard-hierarchy-child-details"
      ]
    },
    "later": {
      "description": "Future work, not yet prioritized",
      "tasks": []
    },
    "someday": {
      "description": "Ideas and possibilities, lowest priority",
      "tasks": [
        "add-model-pricing"
      ]
    },
    "completed": {
      "description": "Completed tasks (archived)",
      "tasks": [
        "dashboard-audit-remaining-fixes",
        "dashboard-comprehensive-audit-fixes",
        "session-end-hook-reliability",
        "framework-phase-gate-audit",
        "dashboard-v4-redesign",
        "cli-session-activity-logs"
      ]
    }
  },
  "tasks": {
    "dashboard-v4-redesign": {
      "id": "dashboard-v4-redesign",
      "title": "Dashboard v4 - Data-Dense Redesign",
      "description": "Complete redesign of Fleet Dashboard from card-based to data-dense, table-driven layout. Optimized f...",
      "phase": "implementation",
      "status": "completed",
      "completedAt": "2026-01-02T12:00:00.000Z",
      "completionNotes": "All 6 subtasks complete. 2-panel layout, 5 tabs, CLI/AUTO badges, session launcher, keyboard nav. 29 E2E tests passing.",
      "childTaskIds": [
        "dashboard-v4-layout",
        "dashboard-v4-sessions",
        "dashboard-v4-tabs",
        "dashboard-v4-backend",
        "dashboard-v4-launcher",
        "dashboard-v4-testing"
      ],
      "parentTaskId": null
    },
    "add-model-pricing": {
      "parentTaskId": null,
      "childTaskIds": [],
      "delegatedTo": null,
      "delegationDepth": 0,
      "decomposition": null,
      "id": "add-model-pricing",
      "title": "Add GPT-5.2 and Gemini 3 Pricing",
      "description": "Add pricing configuration for GPT-5.2 and Gemini 3 models to the cost calculator and fix hardcoded Claude defaults",
      "phase": "research",
      "priority": "low",
      "estimate": "1h",
      "tags": [
        "pricing",
        "multi-model",
        "configuration"
      ],
      "depends": {
        "blocks": [],
        "requires": [],
        "related": []
      },
      "acceptance": [
        "GPT-5.2 pricing added",
        "Gemini 3 pricing added",
        "Claude defaults configurable",
        "Tests pass"
      ],
      "status": "ready",
      "assignee": null,
      "created": "2025-12-19T04:07:23.583Z",
      "updated": "2025-12-28T03:00:00.000Z"
    },
    "cli-session-activity-logs": {
      "id": "cli-session-activity-logs",
      "title": "CLI Session Activity Logs in Dashboard",
      "description": "Display tool calls, file edits, and commands for CLI sessions in the dashboard Logs tab. Research co...",
      "phase": "implementation",
      "status": "completed",
      "completedAt": "2026-01-02T08:00:00.000Z",
      "completionNotes": "Implemented all 4 phases: API endpoint, dashboard UI update, SSE streaming, E2E tests. 9 new tests added.",
      "childTaskIds": [],
      "parentTaskId": null
    },
    "dashboard-blocked-tasks-view": {
      "parentTaskId": null,
      "childTaskIds": [],
      "delegatedTo": null,
      "delegationDepth": 0,
      "decomposition": null,
      "id": "dashboard-blocked-tasks-view",
      "title": "Show Blocked Tasks and Dependency Graph in Dashboard",
      "description": "Dashboard only shows ready/in-progress tasks, hiding blocked tasks completely. Should show blocked tasks with their dependencies so users understand what's preventing progress.",
      "phase": "implementation",
      "priority": "medium",
      "estimate": "2h",
      "tags": [
        "dashboard",
        "ux",
        "task-management",
        "visualization"
      ],
      "depends": {
        "blocks": [],
        "requires": [],
        "related": [
          "dashboard-v2-redesign"
        ]
      },
      "acceptance": [
        "Dashboard shows blocked tasks (not just ready/in-progress)",
        "Blocked tasks display what's blocking them (dependency names)",
        "Visual indicator distinguishes blocked vs ready tasks",
        "Optional: Mini dependency graph or tree view",
        "Clicking blocked task shows full dependency chain",
        "Integration with existing task-graph.html visualization"
      ],
      "status": "ready",
      "assignee": null,
      "created": "2025-12-28T02:35:00.000Z",
      "updated": "2025-12-28T02:35:00.000Z"
    },
    "auto-delegation-phase1-hook": {
      "id": "auto-delegation-phase1-hook",
      "title": "Phase 1: Core Hook Infrastructure",
      "phase": "implementation",
      "status": "completed",
      "parentTaskId": "auto-delegation-integration",
      "completedAt": "2026-01-03T02:15:00.000Z",
      "completionNotes": "Created delegation-hook.js + delegation-bridge.js. Hook executes in 51-85ms (target <200ms). Config via delegation-config.json. 26 new tests, 2572 total passing."
    },
    "auto-delegation-phase2-decision": {
      "id": "auto-delegation-phase2-decision",
      "title": "Phase 2: Decision Integration",
      "phase": "implementation",
      "status": "completed",
      "parentTaskId": "auto-delegation-integration",
      "completedAt": "2026-01-03T19:20:00.000Z",
      "completionNotes": "Integrated full DelegationDecider and TaskDecomposer with lazy loading. Enhanced tasks.json lookup with per-task delegationConfig. Added MD5-based decision caching with TTL. 20 new tests (46 total). 2592 tests passing."
    },
    "auto-delegation-phase3-skills": {
      "id": "auto-delegation-phase3-skills",
      "title": "Phase 3: Control Skills",
      "phase": "implementation",
      "status": "completed",
      "parentTaskId": "auto-delegation-integration",
      "completedAt": "2026-01-03T18:50:00.000Z",
      "completionNotes": "Created 4 control skills using agent swarm: /delegate (force delegation with pattern control), /direct (skip delegation), /delegation-status (view active delegations and history), /delegation-config (runtime config changes). All files in .claude/commands/. 2600 tests passing."
    },
    "auto-delegation-phase4-execution": {
      "id": "auto-delegation-phase4-execution",
      "title": "Phase 4: Execution Integration",
      "phase": "implementation",
      "status": "completed",
      "parentTaskId": "auto-delegation-integration",
      "completedAt": "2026-01-04T03:20:00.000Z",
      "completionNotes": "Created delegation-executor.js that bridges /delegate skill to AgentOrchestrator. Generates Task tool invocations for parallel/sequential/debate/review patterns. Updated /delegate skill with execution instructions. 31 new tests, 2631 total passing."
    },
    "fix-direct-skill-state-check": {
      "id": "fix-direct-skill-state-check",
      "title": "Fix /direct Skill - Add State File Check to Hook",
      "description": "The /direct skill documents a state file mechanism (.claude/state/direct-execution.json) but delegation-hook.js never checks for it. Users running /direct will not bypass delegation analysis. Add state file check at start of hook main().",
      "phase": "implementation",
      "priority": "high",
      "estimate": "30m",
      "tags": [
        "auto-delegation",
        "bug-fix",
        "skills"
      ],
      "depends": {
        "blocks": [
          "auto-delegation-phase5-dashboard"
        ],
        "requires": [],
        "related": [
          "auto-delegation-phase3-skills"
        ]
      },
      "acceptance": [
        "/direct skill creates .claude/state/direct-execution.json",
        "delegation-hook.js checks for state file at startup",
        "Hook exits early when directExecution: true",
        "State file is deleted after processing",
        "Tests verify /direct bypasses delegation"
      ],
      "status": "completed",
      "assignee": null,
      "created": "2026-01-04T18:30:00.000Z",
      "updated": "2026-01-04T19:30:00.000Z",
      "completedAt": "2026-01-04T19:30:00.000Z",
      "completionNotes": "Added checkDirectExecutionOverride() function to delegation-hook.js. Checks for .claude/state/direct-execution.json at hook startup, exits early if directExecution: true, clears file after processing. 10 new tests added.",
      "parentTaskId": "auto-delegation-integration",
      "childTaskIds": [],
      "auditSource": "Phase 1-4 Audit - Issue #1"
    },
    "add-hierarchy-delegation-tracking": {
      "id": "add-hierarchy-delegation-tracking",
      "title": "Add HierarchyManager Integration for Delegations",
      "description": "delegation-executor.js generates Task tool invocations but doesn't register delegations with HierarchyManager. Delegations won't appear in the hierarchy tree in dashboard. Add hierarchy registration when Task tool executes.",
      "phase": "implementation",
      "priority": "medium",
      "estimate": "1h",
      "tags": [
        "auto-delegation",
        "hierarchy",
        "dashboard"
      ],
      "depends": {
        "blocks": [],
        "requires": [],
        "related": [
          "auto-delegation-phase4-execution",
          "auto-delegation-phase5-dashboard"
        ]
      },
      "acceptance": [
        "Delegations register parent-child relationships via HierarchyManager",
        "Dashboard hierarchy pane shows delegation tree",
        "Depth tracking works correctly",
        "Tests verify hierarchy registration"
      ],
      "status": "completed",
      "assignee": null,
      "created": "2026-01-04T18:30:00.000Z",
      "updated": "2026-01-04T19:30:00.000Z",
      "completedAt": "2026-01-04T19:30:00.000Z",
      "completionNotes": "Added registerDelegationHierarchy() and getHierarchyRegistry() to delegation-executor.js. Registers parent-child hierarchy when delegations are created. Returns hierarchy info in execution result. 8 new tests added.",
      "parentTaskId": "auto-delegation-integration",
      "childTaskIds": [],
      "auditSource": "Phase 1-4 Audit - Issue #2"
    },
    "orchestrator-log-forwarding": {
      "id": "orchestrator-log-forwarding",
      "title": "Forward Orchestrator Console Logs to Dashboard",
      "description": "The orchestrator writes to local .claude/logs/session-N.log files but doesn't POST to the dashboard's /api/logs/:sessionId/write endpoint. Console output (phase changes, task claims, errors, execution summaries) should be visible in the dashboard Logs tab.",
      "phase": "implementation",
      "priority": "medium",
      "estimate": "1h",
      "tags": [
        "orchestrator",
        "dashboard",
        "logging",
        "observability"
      ],
      "depends": {
        "blocks": [],
        "requires": [],
        "related": [
          "cli-session-activity-logs"
        ]
      },
      "acceptance": [
        "Create logToDashboard(message, level, source) function in orchestrator",
        "Call logToDashboard for: phase transitions, task claims/releases, errors, session summaries",
        "Uses existing POST /api/logs/:sessionId/write endpoint",
        "Falls back gracefully if dashboard not running",
        "Logs appear in dashboard Logs tab with proper formatting",
        "Log level filtering works (INFO, WARN, ERROR)"
      ],
      "status": "completed",
      "assignee": null,
      "created": "2026-01-04T18:45:00.000Z",
      "updated": "2026-01-04T19:30:00.000Z",
      "completedAt": "2026-01-04T19:30:00.000Z",
      "completionNotes": "Added logToDashboard() function to autonomous-orchestrator.js. Logs to /api/logs/:sessionId/write endpoint. Called on: session start, task claim, task complete, phase transition, session error, swarm safety warnings. 24 new tests added.",
      "parentTaskId": null,
      "childTaskIds": []
    },
    "auto-delegation-phase5-dashboard": {
      "id": "auto-delegation-phase5-dashboard",
      "title": "Phase 5: Dashboard Integration",
      "phase": "implementation",
      "status": "completed",
      "completedAt": "2026-01-04T19:55:00.000Z",
      "completionNotes": "All 4 acceptance criteria verified. 229 delegation tests + 417 hierarchy tests passing.",
      "parentTaskId": "auto-delegation-integration",
      "childTaskIds": []
    },
    "dashboard-fleet-ui-completion": {
      "id": "dashboard-fleet-ui-completion",
      "title": "Complete Fleet Management Dashboard UI Features",
      "description": "Agent edits for Fleet Lineage panel and Keyboard Navigation failed to apply in Session 72. Need to i...",
      "phase": "implementation",
      "status": "completed",
      "completedAt": "2025-12-31T06:30:00.000Z",
      "completionNotes": "Session 72: Added #projectCards container, Fleet Lineage panel (fleetLineageSection), View Lineage button, fetchFleetHierarchy(), updateProjectCards(), renderFleetLineage(), enhanced keyboard nav (arrows, 1-9, a/l/m). All 14 E2E tests + 2507 unit tests pass.",
      "childTaskIds": [],
      "parentTaskId": null
    },
    "framework-phase-gate-audit": {
      "id": "framework-phase-gate-audit",
      "title": "Comprehensive Phase Gate Audit - Quality & Validation Enforcement",
      "description": "Audit the project framework's phase gate system to ensure each stage gate enforces appropriate quali...",
      "phase": "validation",
      "status": "completed",
      "completedAt": "2026-01-04T21:30:00.000Z",
      "completionNotes": "Agent swarm audit complete: Documented phase gate definitions (quality-gates.js, phase-inference.js), identified enforcement mechanisms, defined expert reviewers per gate (Strategic Planner, Logic Reviewer, System Architect, Test Engineer, Senior Developer, Review Orchestrator), created PHASE-GATE-REQUIREMENTS.md with full requirements matrix including thresholds (80-90), criteria weights, special checks (architecture compliance, multi-agent sign-off), and parent-child gate enforcement rules.",
      "childTaskIds": [],
      "parentTaskId": null
    },
    "session-end-hook-reliability": {
      "id": "session-end-hook-reliability",
      "title": "Improve Session-End Hook Reliability",
      "description": "The session-end.js hook sometimes fails to deregister sessions from the dashboard. Possible causes: ...",
      "phase": "implementation",
      "status": "completed",
      "completedAt": "2026-01-05T21:15:00.000Z",
      "completionNotes": "All 6 acceptance criteria verified. Hook has 3 retries with exponential backoff+jitter, 2s stdin timeout, debug logging to .claude/debug/hook-debug.log, file-based fallback (pending-deregistrations/), 33 tests in session-end.test.js, and HookMetrics class (959 lines) with persistence and rolling windows. Circuit breaker and error classification also implemented.",
      "childTaskIds": [],
      "parentTaskId": null
    },
    "dashboard-tasks-tab-claims": {
      "id": "dashboard-tasks-tab-claims",
      "title": "Display Task Claims in Dashboard Tasks Tab",
      "description": "Update the Tasks tab to show which sessions have claimed each task. Currently tasks display without ownership info. Should show: claimed-by session ID, agent type, claim expiration status. Backend: modify /api/tasks to include claims via getActiveClaims(). Frontend: update updateTasksPane() to render claim badges.",
      "phase": "implementation",
      "priority": "medium",
      "estimate": "1h",
      "tags": [
        "dashboard",
        "tasks-tab",
        "claims",
        "ux"
      ],
      "depends": {
        "blocks": [],
        "requires": [],
        "related": [
          "dashboard-blocked-tasks-view"
        ]
      },
      "acceptance": [
        "/api/tasks endpoint includes claims array mapped to task IDs",
        "Tasks tab shows 'Claimed by: session-X' badge for claimed tasks",
        "Agent type displayed (orchestrator, developer, etc.)",
        "Visual indicator for expiring-soon claims",
        "Unclaimed tasks show 'Available' badge",
        "Claim info updates via SSE task:claimed/task:released events"
      ],
      "status": "ready",
      "assignee": null,
      "created": "2026-01-05T03:35:00.000Z",
      "updated": "2026-01-05T03:35:00.000Z",
      "parentTaskId": null,
      "childTaskIds": [],
      "delegatedTo": null,
      "delegationDepth": 0
    },
    "dashboard-hierarchy-child-details": {
      "id": "dashboard-hierarchy-child-details",
      "title": "Add Detail Panel for Child Processes in Hierarchy Tab",
      "description": "Explore adding a details side panel to the Hierarchy tab when a child process is selected. Similar to the log detail modal enhancement being built for the Logs tab (double-click to view full details). Should show: child agent metadata, delegation context, task progress, real-time output, parent relationship. Consider reusing the side-panel pattern from Logs tab implementation.",
      "phase": "research",
      "priority": "medium",
      "estimate": "2h",
      "tags": [
        "dashboard",
        "hierarchy-tab",
        "ux",
        "child-agents",
        "detail-panel"
      ],
      "depends": {
        "blocks": [],
        "requires": [],
        "related": [
          "cli-session-activity-logs"
        ]
      },
      "acceptance": [
        "Research: Document current hierarchy tab rendering (updateHierarchyPane)",
        "Research: Identify what child process data is available via API",
        "Research: Review Logs tab detail modal implementation for reuse patterns",
        "Design: Specify what details to show (metadata, delegation context, output, progress)",
        "Design: Decide on interaction pattern (click vs double-click, side panel vs modal)",
        "Design: Mockup or wireframe of the detail view",
        "Optional: Prototype implementation if straightforward"
      ],
      "status": "ready",
      "assignee": null,
      "created": "2026-01-05T03:35:00.000Z",
      "updated": "2026-01-05T03:35:00.000Z",
      "parentTaskId": null,
      "childTaskIds": [],
      "delegatedTo": null,
      "delegationDepth": 0
    },
    "dashboard-comprehensive-audit-fixes": {
      "id": "dashboard-comprehensive-audit-fixes",
      "title": "Dashboard Comprehensive Audit - Fix Critical Issues",
      "description": "Session 96 code review audit identified 23 issues (9 critical, 9 high). Session 97 implemented critical path fixes using 6-agent parallel swarm.",
      "phase": "implementation",
      "priority": "high",
      "estimate": "16h",
      "tags": [
        "dashboard",
        "audit",
        "bug-fix",
        "session-management",
        "sse",
        "multi-project"
      ],
      "depends": {
        "blocks": [],
        "requires": [],
        "related": [
          "dashboard-validation-audit"
        ]
      },
      "acceptance": [
        "Add await to initializeCommandCenter() in autonomous-orchestrator.js:1312",
        "Add addEventListener('log', ...) to dashboard SSE handler",
        "Add session:deregistered to WebSocket broadcast",
        "Always set hierarchyInfo when registering child sessions",
        "Add mutex/lock around claudeSessionId registration to prevent duplicates",
        "Unify project key system between GlobalContextTracker and SessionRegistry",
        "Live parallel testing validates fixes work in real scenarios",
        "No duplicate CLI sessions when running multiple parallel sessions",
        "Autonomous session logs display correctly in dashboard",
        "Hierarchy displays correctly when child agents are active"
      ],
      "status": "completed",
      "assignee": null,
      "created": "2026-01-06T05:50:00.000Z",
      "updated": "2026-01-06T19:45:00.000Z",
      "completedAt": "2026-01-06T19:45:00.000Z",
      "completionNotes": "Session 97: 6-agent parallel swarm fixed critical path issues. Applied: (1) await initializeCommandCenter() at line 892, (2) addEventListener('log') for SSE named events at line 5964, (3) hierarchy:childAdded SSE broadcast at line 3666, (4) project-key-utils.js translation layer (120 lines). 11 new E2E tests added. 2962 tests passing.",
      "parentTaskId": null,
      "childTaskIds": [],
      "delegatedTo": null,
      "delegationDepth": 0,
      "auditSource": "Session 96 - 6-agent parallel code review swarm"
    },
    "dashboard-audit-remaining-fixes": {
      "id": "dashboard-audit-remaining-fixes",
      "title": "Dashboard Audit - Remaining Issues (Race Conditions, SSE, Multi-Project)",
      "description": "Session 97 fixed critical path (3 items). This task covers remaining 10 verified issues from comprehensive audit: race conditions in session registration, SSE event completeness, multi-project isolation, and cleanup policies.",
      "phase": "implementation",
      "priority": "high",
      "estimate": "8h",
      "tags": [
        "dashboard",
        "audit",
        "race-conditions",
        "sse",
        "multi-project",
        "session-management"
      ],
      "depends": {
        "blocks": [],
        "requires": [],
        "related": [
          "dashboard-comprehensive-audit-fixes"
        ]
      },
      "acceptance": [
        "1.1 CRITICAL: Add claudeSessionId deduplication to prevent double registration",
        "2.1 CRITICAL: Add mutex/lock around claudeSessionId registration (TOCTOU race)",
        "5.1 CRITICAL: Require OTLP metrics to include project ID (don't guess)",
        "1.3 HIGH: Set ORCHESTRATOR_SESSION env var before spawning processes",
        "2.2 HIGH: Mark sessions 'stale' instead of deleting (grace period)",
        "2.3 HIGH: Fix SSE reconnection race that creates duplicates",
        "4.2 HIGH: Emit SSE events for phase/quality/confidence state changes",
        "4.3 HIGH: Add heartbeat to remaining 3 SSE endpoints",
        "5.3 HIGH: Add per-project cleanup configuration",
        "1.4 LOW: Ensure sessionType and autonomous fields update atomically",
        "E2E tests for race condition scenarios"
      ],
      "status": "completed",
      "assignee": null,
      "created": "2026-01-06T20:00:00.000Z",
      "updated": "2026-01-06T20:50:00.000Z",
      "completedAt": "2026-01-06T20:50:00.000Z",
      "completionNotes": "Session 99: Fixed 8 of 10 issues. Added registerWithDeduplication() with lock for TOCTOU race prevention (1.1, 2.1). Implemented stale session grace period with recovery (2.2, 2.3). Added SSE events for phase/quality/confidence changes (4.2). Added heartbeat to 3 SSE endpoints (4.3). Fixed OTLP project resolution fallback (5.1). Added per-project cleanup config (5.3). 24 new tests, 2998 total passing. Remaining: 1.3 (ORCHESTRATOR_SESSION env var), 1.4 (atomic field updates).",
      "parentTaskId": null,
      "childTaskIds": [],
      "delegatedTo": null,
      "delegationDepth": 0,
      "auditSource": "DASHBOARD-COMPREHENSIVE-AUDIT.md - Issues 1.1, 1.3, 1.4, 2.1-2.3, 4.2-4.3, 5.1, 5.3"
    }
  },
  "archival": {
    "maxCompleted": 5,
    "autoArchive": true,
    "archivePath": ".claude/dev-docs/archives/tasks-archive.json",
    "lastArchived": "2026-01-06T05:53:03.576Z"
  }
}